<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>شات زيوس - إله الرعد</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<!-- iOS PWA full-screen -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="شات زيوس">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          zeus: {
            primary: '#0a0f1a',          // خلفية داكنة مائلة للأزرق
            secondary: '#122033',        // طبقة أفتح
            accent: '#2d9cff',           // أزرق كهربائي
            'accent-hover': '#1e7fe0',   // أزرق أغمق عند التحويم
            text: '#e6f0ff'              // نص فاتح مزرق
          }
        },
        fontFamily: {
          arabic: ['Tajawal', 'Cairo', 'sans-serif']
        },
        animation: {
          'fade-in': 'fadeIn 0.3s ease-out',
          'slide-up': 'slideUp 0.3s ease-out',
          'lightning': 'lightning 2.2s linear infinite'
        },
        keyframes: {
          fadeIn: { '0%': {opacity:'0'}, '100%': {opacity:'1'} },
          slideUp: { '0%': {opacity:'0', transform:'translateY(20px)'}, '100%': {opacity:'1', transform:'translateY(0)'} },
          lightning: {
            '0%, 97%, 100%': { filter:'brightness(1)' },
            '12%': { filter:'brightness(1.35)' },
            '13%': { filter:'brightness(1)' },
            '20%': { filter:'brightness(1.5)' },
            '21%': { filter:'brightness(1)' },
            '55%': { filter:'brightness(1.25)' }
          }
        }
      }
    },
    darkMode: 'class'
  }
</script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="module" src="main.js" defer></script>
</head>
<body class="transition-colors duration-300 min-h-screen">
    <script>
        if (
            "serviceWorker" in navigator &&
            (window.location.protocol === "https:" ||
                window.location.hostname === "localhost")
        ) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("/service-worker.js")
                    .then((registration) => {
                        console.log(
                            "Service Worker registered with scope:",
                            registration.scope
                        );
                    })
                    .catch((error) => {
                        console.log("Service Worker registration failed:", error);
                    });
            });
        }
    </script>
<div id="app" class="fixed inset-0 w-screen h-[100svh] overflow-hidden">

    <div id="notificationContainer" class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4 pointer-events-none">
        </div>

    <chat-history
        :chats="chats"
        :current-chat-id="currentChatId"
        :is-sidebar-open="isSidebarOpen"
        @select-chat="handleSelectChat"
        @new-chat="handleNewChat"
        @delete-chat="handleDeleteChat"
        @update-chat-title="handleUpdateChatTitle"
        @close-sidebar="handleCloseSidebar"
        @reorder-chats="handleReorderChats"
    >
    </chat-history>

    <settings-modal
        :is-settings-visible="isSettingsVisible"
        :initial-settings="settings"
        :current-user="currentUser"
        :providers="providers"
        @close="closeSettingsModal"
        @save-settings="handleSaveSettings"
    >
    </settings-modal>

    <!-- داخل #app -->

<!-- داخل #app وقبل أي محتوى آخر -->
<div id="bgCanvas" class="absolute inset-0 -z-10 bg-calm pointer-events-none"></div>

<div class="flex w-full h-full">

        <div class="flex-1 flex flex-col bg-black">
            <header class="flex-shrink-0 px-6 py-4 border-b border-gray-800"
        style="background:
          linear-gradient(180deg, rgba(45,156,255,0.10), rgba(10,15,26,0.92) 45%),
          url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 800 200%22 preserveAspectRatio=%22none%22><polyline points=%220,150 150,40 210,90 300,30 380,120 470,10 560,100 650,20 800,120%22 fill=%22none%22 stroke=%22rgba(111,183,255,0.35)%22 stroke-width=%223%22/></svg>')
          no-repeat center/cover, #0a0f1a;">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4 space-x-reverse">
                        <button @click="openSidebar" aria-label="فتح الشريط الجانبي" aria-controls="sidebar" aria-expanded="false"
        class="text-gray-400 hover:text-gray-200 p-2 rounded-lg hover:bg-gray-800 transition-colors" title="فتح الشريط الجانبي">
  <i class="fas fa-bars text-xl" aria-hidden="true"></i>
</button>
                        <div class="flex items-center space-x-3 space-x-reverse">
                            <div class="zeus-logo w-8 h-8 rounded-full"></div>
                            <div>
                                <h1 class="header-title text-xl font-bold text-white">شات زيوس</h1>
                                <p class="header-subtitle text-sm text-gray-400">إله الرعد والحكمة</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2 space-x-reverse">
                        <user-menu
                            :current-user="currentUser"
                            @login="handleLogin"
                            @logout="handleLogout"
                            @open-settings="handleOpenSettings"
                        ></user-menu>
                    </div>
                </div>
            </header>

            <messages-area
                :current-chat="currentChat"
                :streaming-state="streamingState"
            >
            </messages-area>

            <message-input
                :is-streaming="streamingState.isStreaming"
                @send-message="handleSendMessage"
                @stop-streaming="handleStopStreaming"
            >
            </message-input>
            </main>
        </div>
    </div>

</body>
</html>
